{
  "info": {
    "_postman_id": "ddf2dd7a-0e72-40de-8e02-39b647fee6f6",
    "name": "Movie Recommendation App Collection",
    "description": "Complete Postman collection for Project Nexus, full CRUD, Admin/User/Public flows, including all existing endpoints.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "41551998"
  },
  "item": [
    {
      "name": "Auth",
      "item": [
        {
          "name": "User Signup",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"username\": \"test\",\n  \"email\": \"test@email.com\",\n  \"password\": \"pass\",\n  \"first_name\": \"User\",\n  \"last_name\": \"Test\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/users/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "users",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "User Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "pm.environment.set(\"jwt_token\", jsonData.access);",
                  "pm.environment.set(\"refresh_token\", jsonData.refresh);",
                  "pm.environment.set(\"user_id\", jsonData.id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"test@email.com\",\n  \"password\": \"pass\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/token/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "token",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "User Refresh Token",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "pm.environment.set(\"jwt_token\", jsonData.access);"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"refresh\": \"{{refresh_token}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/token/refresh/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "token",
                "refresh",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Admin Login",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "pm.environment.set(\"admin_jwt\", jsonData.access);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"email\": \"admin@email.com\",\n  \"password\": \"pass\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/token/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "token",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get User",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();\r",
                  "pm.environment.set(\"user_id\", jsonData[0].user_id);"
                ],
                "type": "text/javascript",
                "packages": {},
                "requests": {}
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              }
            ],
            "url": {
              "raw": "{{base_url}}/api/users",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "users"
              ]
            }
          },
          "response": []
        },
        {
          "name": "Update User",
          "request": {
            "method": "PUT",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}"
              },
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\r\n    \"user_id\": \"{{user_id}}\",\r\n    \"username\": \"test\",\r\n    \"first_name\": \"NEW name\",\r\n    \"last_name\": \"123\",\r\n    \"email\": \"test@email.com\",\r\n    \"password\": \"pass\"\r\n}"
            },
            "url": {
              "raw": "{{base_url}}/api/users/{{user_id}}/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "users",
                "{{user_id}}",
                ""
              ]
            }
          },
          "response": []
        }
      ]
    },
    {
      "name": "Admin",
      "item": [
        {
          "name": "CRUD Users",
          "item": [
            {
              "name": "List Users",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/users/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "users",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Delete User",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/users/{{user_id}}/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "users",
                    "{{user_id}}",
                    ""
                  ]
                }
              },
              "response": []
            }
          ]
        },
        {
          "name": "CRUD Genres",
          "item": [
            {
              "name": "Create Genre",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "var jsonData = pm.response.json();\r",
                      "pm.environment.set(\"genre_id\", jsonData.genre_id);\r",
                      ""
                    ],
                    "type": "text/javascript",
                    "packages": {},
                    "requests": {}
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\"name\":\"New Genre\"}"
                },
                "url": {
                  "raw": "{{base_url}}/api/genres/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "genres",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Get Genre",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "var jsonData = pm.response.json();\r",
                      "pm.environment.set(\"genre_id\", jsonData.genre_id);\r",
                      ""
                    ],
                    "type": "text/javascript",
                    "packages": {},
                    "requests": {}
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/genres/{{genre_id}}",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "genres",
                    "{{genre_id}}"
                  ]
                }
              },
              "response": []
            },
            {
              "name": "List Genres",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "// Pick History and Action IDs\r",
                      "let genres = pm.response.json();\r",
                      "\r",
                      "// Find IDs by name\r",
                      "let historyId = genres.find(g => g.name === \"History\")?.genre_id;\r",
                      "let actionId  = genres.find(g => g.name === \"Action\")?.genre_id;\r",
                      "\r",
                      "// Store in environment for later requests\r",
                      "pm.environment.set(\"history_id\", historyId);\r",
                      "pm.environment.set(\"action_id\", actionId);"
                    ],
                    "type": "text/javascript",
                    "packages": {},
                    "requests": {}
                  }
                }
              ],
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/genres/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "genres",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Update Genre",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\"name\":\"New Genre Updated\"}"
                },
                "url": {
                  "raw": "{{base_url}}/api/genres/{{genre_id}}/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "genres",
                    "{{genre_id}}",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Delete Genre",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/genres/{{genre_id}}/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "genres",
                    "{{genre_id}}",
                    ""
                  ]
                }
              },
              "response": []
            }
          ]
        },
        {
          "name": "CRUD Movies",
          "item": [
            {
              "name": "Create Movie",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "var jsonData = pm.response.json();\r",
                      "pm.environment.set(\"movie_id\", jsonData.movie_id);"
                    ],
                    "type": "text/javascript",
                    "packages": {},
                    "requests": {}
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\"title\":\"New Movie\",\"description\":\"Desc\",\"release_date\":\"2026-01-01\",\"duration\":120,\"cast\":\"Actor A\",\"director\":\"Director X\",\"language\":\"English\",\"country\":\"USA\",\"genres\":[\"{{genre_id}}\",\"{{history_id}}\", \"{{action_id}}\"]}"
                },
                "url": {
                  "raw": "{{base_url}}/api/movies/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "movies",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "List Movies",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/movies/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "movies",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Get Movie",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/movies/{{movie_id}}/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "movies",
                    "{{movie_id}}",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Update Movie",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\"title\":\"Updated Movie Title\",\"description\":\"Desc\",\"release_date\":\"2026-01-01\",\"duration\":120,\"cast\":\"Actor A\",\"director\":\"Director X\",\"language\":\"English\",\"country\":\"USA\",\"genres\":[\"{{genre_id}}\"]}"
                },
                "url": {
                  "raw": "{{base_url}}/api/movies/{{movie_id}}/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "movies",
                    "{{movie_id}}",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Delete Movie",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{admin_jwt}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/movies/{{movie_id}}/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "movies",
                    "{{movie_id}}",
                    ""
                  ]
                }
              },
              "response": []
            }
          ]
        }
      ]
    },
    {
      "name": "User Actions",
      "item": [
        {
          "name": "Profile",
          "item": [
            {
              "name": "Get Profile",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/users/{{user_id}}/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "users",
                    "{{user_id}}",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Update Profile",
              "request": {
                "method": "PUT",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\r\n    \"user_id\": \"{{user_id}}\",\r\n    \"username\": \"test\",\r\n    \"first_name\": \"User\",\r\n    \"last_name\": \"123\",\r\n    \"email\": \"test@email.com\",\r\n    \"password\": \"pass\"\r\n}"
                },
                "url": {
                  "raw": "{{base_url}}/api/users/{{user_id}}/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "users",
                    "{{user_id}}",
                    ""
                  ]
                }
              },
              "response": []
            }
          ]
        },
        {
          "name": "Movies",
          "item": [
            {
              "name": "Rate Movie",
              "event": [
                {
                  "listen": "test",
                  "script": {
                    "exec": [
                      "var jsonData = pm.response.json();\r",
                      "pm.environment.set(\"rating_id\", jsonData.rating_id);"
                    ],
                    "type": "text/javascript",
                    "packages": {},
                    "requests": {}
                  }
                }
              ],
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json"
                  }
                ],
                "body": {
                  "mode": "raw",
                  "raw": "{\"score\":5,\"review_text\":\"Great!\"}"
                },
                "url": {
                  "raw": "{{base_url}}/api/movies/{{movie_id}}/rate/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "movies",
                    "{{movie_id}}",
                    "rate",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Get User Ratings",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}",
                    "type": "text"
                  },
                  {
                    "key": "Content-Type",
                    "value": "application/json",
                    "type": "text"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/ratings/?user__username=test",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "ratings",
                    ""
                  ],
                  "query": [
                    {
                      "key": "user__username",
                      "value": "test"
                    }
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Delete Rating",
              "request": {
                "method": "DELETE",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/ratings/{{rating_id}}/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "ratings",
                    "{{rating_id}}",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Mark as Watched",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/movies/{{movie_id}}/watch/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "movies",
                    "{{movie_id}}",
                    "watch",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Unwatch Movie",
              "request": {
                "method": "POST",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/movies/{{movie_id}}/unwatch/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "movies",
                    "{{movie_id}}",
                    "unwatch",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Watched Movies",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/movies/recommended/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "movies",
                    "recommended",
                    ""
                  ]
                }
              },
              "response": []
            },
            {
              "name": "Recommended Movies",
              "request": {
                "method": "GET",
                "header": [
                  {
                    "key": "Authorization",
                    "value": "Bearer {{jwt_token}}"
                  }
                ],
                "url": {
                  "raw": "{{base_url}}/api/movies/recommended/",
                  "host": [
                    "{{base_url}}"
                  ],
                  "path": [
                    "api",
                    "movies",
                    "recommended",
                    ""
                  ]
                }
              },
              "response": []
            }
          ]
        }
      ]
    },
    {
      "name": "Public",
      "item": [
        {
          "name": "List Movies",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/movies/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "movies",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Get Movie",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/movies/{{movie_id}}/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "movies",
                "{{movie_id}}",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Popular Movies",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/movies/popular/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "movies",
                "popular",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Top Rated Movies",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/movies/top-rated/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "movies",
                "top-rated",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Most Watched Movies",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/api/movies/most-watched/",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "api",
                "movies",
                "most-watched",
                ""
              ]
            }
          },
          "response": []
        },
        {
          "name": "Movie ratings",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/watch-history/?user__username=test",
              "host": [
                "{{base_url}}"
              ],
              "path": [
                "watch-history",
                ""
              ],
              "query": [
                {
                  "key": "user__username",
                  "value": "test"
                }
              ]
            }
          },
          "response": []
        }
      ]
    }
  ],
  "event": [
    {
      "listen": "prerequest",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "requests": {},
        "exec": [
          ""
        ]
      }
    },
    {
      "listen": "test",
      "script": {
        "type": "text/javascript",
        "packages": {},
        "requests": {},
        "exec": [
          ""
        ]
      }
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://youssefelghamour.pythonanywhere.com/"
    },
    {
      "key": "jwt_token",
      "value": ""
    },
    {
      "key": "refresh_token",
      "value": ""
    },
    {
      "key": "admin_jwt",
      "value": ""
    },
    {
      "key": "user_id",
      "value": ""
    },
    {
      "key": "movie_id",
      "value": ""
    },
    {
      "key": "genre_id",
      "value": ""
    },
    {
      "key": "action_id",
      "value": ""
    },
    {
      "key": "history_id",
      "value": ""
    },
    {
      "key": "rating_id",
      "value": ""
    }
  ]
}